<div class="user-register-table-container">
  <div style="display: flex; justify-content: space-between; width: 100%; margin-bottom: 2rem; gap: 0.5rem;">
    <h2 class='text-2xl font-bold text-blue-700 mb-4'>Manage Employee</h2>
    <p-button type="button" icon="pi pi-user-plus" class="register-btn" (click)="addEmployee()" label="Add Employee"></p-button>
  </div>

  <div class="card flex justify-center gap-2">
    <p-toast></p-toast>
    <p-confirmDialog></p-confirmDialog>
  </div>
  
  <p-table [value]="loading ? skeletonRows : employees" [paginator]="true" [rows]="10" [showCurrentPageReport]="true" 
           currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
    <ng-template pTemplate="header">
      <tr>
        <th>Employee ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Designation</th>
        <!-- <th>Status</th> -->
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-row let-rowIndex="rowIndex">
      <tr *ngIf="loading; else dataRow">
        <td class="skeleton-cell"><p-skeleton width="5rem" height="1rem" borderRadius="8px"></p-skeleton></td>
        <td class="skeleton-cell"><p-skeleton width="10rem" height="1rem" borderRadius="8px"></p-skeleton></td>
        <td class="skeleton-cell"><p-skeleton width="12rem" height="1rem" borderRadius="8px"></p-skeleton></td>
        <td class="skeleton-cell"><p-skeleton width="7rem" height="1rem" borderRadius="8px"></p-skeleton></td>
        <td class="skeleton-cell"><p-skeleton width="9rem" height="1rem" borderRadius="8px"></p-skeleton></td>
        <td>
          <div class="action-buttons">
            <p-skeleton width="1.75rem" height="1.75rem" shape="circle"></p-skeleton>
            <p-skeleton width="1.75rem" height="1.75rem" shape="circle"></p-skeleton>
          </div>
        </td>
      </tr>
      <ng-template #dataRow>
        <tr>
          <td>{{ row.employeeId }}</td>
          <td>{{ row.employeeFirstName }} {{ row.employeeMiddleName }} {{ row.employeeLastName }}</td>
          <td>{{ row.employeeEmail }}</td>
          <td>{{ row.employeePhone }}</td>
          <td [class]="loadingDesignations ? 'loading-designation' : ''">{{ getDesignationName(row.employeeDesignationId || row.designationId || row.designation) }}</td>
          <td>
            <div class="action-buttons">
              <button type="button" pButton icon="pi pi-user-edit" class="p-button-text p-button-sm p-button-info"
                (click)="onEdit(row)" title="Edit Employee"></button>
              <button type="button" pButton icon="pi pi-trash" class="p-button-text p-button-sm p-button-danger"
                (click)="confirmDelete($event, row)" title="Delete Employee"></button>
            </div>
          </td>
        </tr>
      </ng-template>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="7" class="text-center">No employees found</td>
      </tr>
    </ng-template>
  </p-table>
</div>