<div class="admin-management-container">
  <div style="display: flex; justify-content: space-between; width: 100%; margin-bottom: 2rem; gap: 0.5rem;">
    <h2 class='text-2xl font-bold text-blue-700 mb-4'>Manage Admin</h2>
    <p-button type="button" icon="pi pi-user-plus" class="register-btn" (click)="addAdmin()"
      label="Add Admin"></p-button>
  </div>


  <div class="card flex justify-center gap-2">

    <p-toast></p-toast>
    <p-confirmDialog></p-confirmDialog>
  </div>

  <div class="card">
    <!-- Error State -->
    <div *ngIf="error && !loading" class="p-3">
      <p-message severity="error">
        {{ error }}
      </p-message>
    </div>

    <!-- Table -->
    <p-table [value]="loading ? skeletonRows : admins" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
      [lazy]="false" [showLoader]="false"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [rowsPerPageOptions]="[10, 25, 50]" [tableStyle]="{'min-width': '60rem'}"
      [globalFilterFields]="['name', 'email', 'phone']">

      <ng-template pTemplate="header">
        <tr>
          <th>Admin ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th style="width: 12rem">Actions</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-row>
        <tr *ngIf="loading; else adminRow">
          <td class="skeleton-cell"><p-skeleton width="4rem" height="1rem"></p-skeleton></td>
          <td class="skeleton-cell"><p-skeleton width="10rem" height="1rem"></p-skeleton></td>
          <td class="skeleton-cell"><p-skeleton width="14rem" height="1rem"></p-skeleton></td>
          <td class="skeleton-cell"><p-skeleton width="8rem" height="1rem"></p-skeleton></td>
          <td>
            <div class="flex gap-2">
              <p-skeleton width="1.75rem" height="1.75rem" shape="circle"></p-skeleton>
              <p-skeleton width="1.75rem" height="1.75rem" shape="circle"></p-skeleton>
            </div>
          </td>
        </tr>
        <ng-template #adminRow>
          <tr>
            <td>{{row.displayId}}</td>
            <td>{{row.name}}</td>
            <td>{{row.email}}</td>
            <td>{{row.phone}}</td>
            <td>
              <div class="flex gap-2">
                <button pButton pRipple type="button" icon="pi pi-pencil"
                  class="p-button-rounded p-button-text p-button-primary" (click)="editAdmin(row)"></button>
                <button pButton pRipple type="button" icon="pi pi-trash"
                  class="p-button-rounded p-button-text p-button-danger" (click)="deleteAdmin(row)"></button>
              </div>
            </td>
          </tr>
        </ng-template>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6" class="text-center p-4">
            <p>No admins found. Click 'Add Admin' to create one.</p>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>