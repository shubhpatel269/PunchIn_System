<div class="d-head">
    <h2 class="table-heading"><strong>{{ isEditMode ? 'Edit Admin' : 'Add Admin' }}</strong></h2>
</div>
<p-toast />
<div class="d-body">
    <form [formGroup]="adminForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
            <div class="p-field">
                <label for="adminFirstName" class="required">First Name</label>
                <input pInputText id="adminFirstName" formControlName="adminFirstName" placeholder="First Name" />
                @if (adminForm.get('adminFirstName')?.touched && adminForm.get('adminFirstName')?.hasError('required'))
                {
                <span class="error-text">First name is required.</span>
                }
                @if (adminForm.get('adminFirstName')?.touched && adminForm.get('adminFirstName')?.hasError('pattern')) {
                <span class="error-text">First name must contain only letters.</span>
                }
            </div>
            <div class="p-field">
                <label for="adminMiddleName">Middle Name</label>
                <input pInputText id="adminMiddleName" formControlName="adminMiddleName" placeholder="Middle Name" />
            </div>
        </div>

        <div class="p-field">
            <label for="adminLastName" class="required">Last Name</label>
            <input pInputText id="adminLastName" formControlName="adminLastName" placeholder="Last Name" />
            @if (adminForm.get('adminLastName')?.touched && adminForm.get('adminLastName')?.hasError('required')) {
            <span class="error-text">Last name is required.</span>
            }
            @if (adminForm.get('adminLastName')?.touched && adminForm.get('adminLastName')?.hasError('pattern')) {
            <span class="error-text">Last name must contain only letters.</span>
            }
        </div>

        <div class="p-field">
            <label for="adminEmail" class="required">Email</label>
            <input pInputText id="adminEmail" formControlName="adminEmail" type="email" placeholder="Email Address"
                [readonly]="isEditMode" />
            @if (adminForm.get('adminEmail')?.touched && adminForm.get('adminEmail')?.hasError('required')) {
            <span class="error-text">Email is required.</span>
            }
            @if (adminForm.get('adminEmail')?.touched && adminForm.get('adminEmail')?.hasError('email')) {
            <span class="error-text">Please enter a valid email address.</span>
            }
            @if (isEditMode) {
            <span class="info-text">Email cannot be changed after creation.</span>
            }
        </div>

        @if (!isEditMode) {
        <div class="p-field">
            <label for="adminPassword" class="required">Password</label>
            <input pInputText id="adminPassword" formControlName="adminPassword" type="password"
                placeholder="Password" />
            @if (adminForm.get('adminPassword')?.touched && adminForm.get('adminPassword')?.hasError('required')) {
            <span class="error-text">Password is required.</span>
            }
            @if (adminForm.get('adminPassword')?.touched && adminForm.get('adminPassword')?.hasError('minlength')) {
            <span class="error-text">Password must be at least 6 characters long.</span>
            }
        </div>
        }

        <div class="p-field">
            <label for="adminPhone" class="required">Phone Number</label>
            <input pInputText id="adminPhone" formControlName="adminPhone" type="tel" placeholder="Phone Number" />
            @if (adminForm.get('adminPhone')?.touched && adminForm.get('adminPhone')?.hasError('required')) {
            <span class="error-text">Phone number is required.</span>
            }
            @if (adminForm.get('adminPhone')?.touched && adminForm.get('adminPhone')?.hasError('pattern')) {
            <span class="error-text">Phone number must be exactly 10 digits.</span>
            }
        </div>

        <div class="p-field">
            <label for="adminDob" class="required">Date of Birth</label>
            <p-datepicker id="adminDob" formControlName="adminDob" placeholder="Select Date of Birth" [showIcon]="true"
                [maxDate]="maxDate" dateFormat="dd/mm/yy" [showOnFocus]="false" [readonlyInput]="false"
                [touchUI]="false" [appendTo]="'body'"></p-datepicker>
            @if (formInitialized && adminForm.get('adminDob')?.touched &&
            adminForm.get('adminDob')?.hasError('required')) {
            <span class="error-text">Date of birth is required.</span>
            }
        </div>

        @if (isEditMode) {
        <div class="p-field">
            <label for="isActive">Status</label>
            <div class="flex align-items-center gap-2">
                <input type="checkbox" id="isActive" formControlName="isActive" />
                <label for="isActive">Active</label>
            </div>
        </div>
        }
    </form>
</div>
<div class="d-footer">
    <button pButton type="button" label="Cancel" class="p-button-secondary" (click)="onClose()"
        style="margin-right: 1rem;" [disabled]="loading"></button>
    <button pButton type="submit" [label]="isEditMode ? 'Update' : 'Add'" (click)="onSubmit()" [loading]="loading"
        [disabled]="loading"></button>
</div>